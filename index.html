<style>
    /* 中略 */
    .answer-box {
        width: 100%; 
        flex-grow: 1; 
        max-height: 50%;
        display: flex; 
        /* 縦書きの列を、右から左へ並べる */
        flex-direction: row-reverse; 
        align-items: center; 
        justify-content: center;
        writing-mode: vertical-rl;
        font-size: clamp(32px, 6vh, 60px); 
        color: #e74c3c; 
        font-weight: bold;
        opacity: 0; 
        transform: scale(0.9);
        gap: 40px; /* 解答間のスペースを広めに確保 */
    }

    /* 各解答の塊 */
    .ans-item {
        white-space: nowrap; /* 1つの答えが途中で改行されないようにする */
        line-height: 1.1;
    }

    .answer-box.visible { 
        opacity: 1; 
        transform: scale(1); 
        transition: 0.2s; 
    }
    
    /* 2列以上のときの文字サイズ微調整 */
    .multi-ans { 
        font-size: clamp(24px, 5vh, 45px); 
    }
    /* 中略 */
</style>

<script>
    // showQuestion関数内の解答処理部分を以下に差し替え
    function showQuestion() {
        const q = currentQuestions[currentIndex];
        document.getElementById('q-number').innerText = (currentIndex + 1);
        document.getElementById('q-text').innerHTML = q.q.replace(/[（\(](.*?)[）\)]/g, '<span class="highlight">$1</span>');
        
        const answerArea = document.getElementById('a-text');
        const rawAns = q.a || "";
        
        // 全角・半角の「、」「,」で分割
        const ansList = rawAns.split(/[、,，]/); 

        if (ansList.length > 1) {
            answerArea.classList.add('multi-ans');
            // 各解答を ans-item クラスで包む
            answerArea.innerHTML = ansList
                .map(a => `<div class="ans-item">${a.trim()}</div>`)
                .join('');
        } else {
            answerArea.classList.remove('multi-ans');
            answerArea.innerHTML = `<div class="ans-item">${rawAns}</div>`;
        }

        document.getElementById('a-text').classList.remove('visible');
        document.getElementById('show-btn').classList.remove('hidden');
        document.getElementById('judgement-btns').classList.add('hidden');
    }
</script>
