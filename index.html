<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <style>
        :root {
            --ink-black: #000000;
            --main-font: "UD Digital Kyokasho N-R", "UD デジタル 教科書体 N-R", sans-serif;
        }

        body {
            margin: 0;
            background-color: #f0f0f0;
            font-family: var(--main-font);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- ナビゲーション（閲覧モード用） --- */
        #nav-controls {
            position: fixed; top: 10px; width: 100%;
            display: flex; justify-content: center; gap: 20px;
            z-index: 1000; writing-mode: horizontal-tb;
        }

        /* --- プリント表示エリア --- */
        #print-wrapper {
            display: flex;
            flex-direction: column; /* 印刷時は縦にページが並ぶ */
            gap: 40px;
            padding: 40px 20px;
        }

        .print-canvas {
            display: flex;
            flex-direction: row-reverse;
            background: white;
            border: 1px solid #999;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            page-break-after: always; /* 印刷時にここで改ページ */
        }

        /* --- モード別スタイル --- */
        /* 閲覧モード：1画面に1枚だけ表示 */
        .mode-responsive { height: 85vh; padding: 2vh; }
        .mode-responsive .column-unit td { width: 5.5vw; max-width: 65px; }
        .mode-responsive .h-ques { height: 60%; writing-mode: vertical-rl; text-orientation: upright; font-size: min(2vh, 18px); padding: 10px 2px; text-align: start; }
        
        /* 印刷モード：サイズ固定で縦に並べる */
        .mode-fixed { height: 800px; padding: 30px; }
        .mode-fixed .column-unit td { width: 65px; }
        .mode-fixed .h-ques { height: 480px; writing-mode: vertical-rl; text-orientation: upright; font-size: 20px; padding: 20px 5px; text-align: start; }

        /* 共通テーブルスタイル */
        .column-unit { border-collapse: collapse; height: 100%; }
        .column-unit td { border: 1px solid #000; text-align: center; vertical-align: middle; }
        .h-check { height: 10%; }
        .h-num { height: 5%; background: #f9f9f9; font-weight: bold; }
        .h-ans { height: 20%; color: #e74c3c; writing-mode: vertical-rl; text-orientation: upright; font-weight: bold; }
        .square { width: 25px; height: 25px; border: 1px solid #000; margin: auto; }

        .print-title {
            writing-mode: vertical-rl; font-weight: bold; border-left: 3px double #000;
            padding: 0 10px; margin-left: 20px; display: flex; align-items: center;
            border: 1px solid #000; border-left: 3px double #000;
        }

        button { padding: 10px 20px; cursor: pointer; border-radius: 5px; border: none; background: #333; color: white; font-weight: bold; }
        .hidden { display: none !important; }

        @media print {
            #nav-controls { display: none; }
            body { background: white; }
            #print-wrapper { gap: 0; padding: 0; }
        }
    </style>
</head>
<body>

    <div id="nav-controls">
        <button id="prev-btn" onclick="changePage(-1)">← 前の15問</button>
        <button onclick="toggleViewMode()">モード切替 (閲覧/印刷)</button>
        <button id="next-btn" onclick="changePage(1)">次の15問 →</button>
        <button style="background: #ff4757;" onclick="window.history.back()">とじる</button>
    </div>

    <div id="print-wrapper">
        </div>

<script>
    // ダミーデータ40問
    const allQuestions = Array.from({length: 40}, (_, i) => ({
        id: i + 1,
        q: `第${i+1}問目の問題文です。漢字の練習をしましょう。（　）`,
        a: `解答${i+1}`
    }));

    let currentPage = 0;
    let isFixedMode = false; // 初期は閲覧モード

    function render() {
        const wrapper = document.getElementById('print-wrapper');
        wrapper.innerHTML = "";
        
        const questionsPerPage = 15;

        if (isFixedMode) {
            // 印刷・保存モード：全問を15問ずつのブロック（ページ）として表示
            for (let i = 0; i < allQuestions.length; i += questionsPerPage) {
                const chunk = allQuestions.slice(i, i + questionsPerPage);
                wrapper.appendChild(createPageElement(chunk, "mode-fixed"));
            }
            document.getElementById('prev-btn').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
        } else {
            // レスポンシブモード：現在のページ（15問）のみ表示
            const start = currentPage * questionsPerPage;
            const chunk = allQuestions.slice(start, start + questionsPerPage);
            wrapper.appendChild(createPageElement(chunk, "mode-responsive"));
            
            document.getElementById('prev-btn').classList.toggle('hidden', currentPage === 0);
            document.getElementById('next-btn').classList.toggle('hidden', start + questionsPerPage >= allQuestions.length);
        }
    }

    function createPageElement(data, modeClass) {
        const canvas = document.createElement('div');
        canvas.className = `print-canvas ${modeClass}`;
        
        const title = document.createElement('div');
        title.className = "print-title";
        title.innerText = "６年　やまなし";
        canvas.appendChild(title);

        const container = document.createElement('div');
        container.className = "kanji-table-container";

        data.forEach(item => {
            const table = document.createElement('table');
            table.className = "column-unit";
            table.innerHTML = `
                <tr><td class="h-check"><div class="square"></div></td></tr>
                <tr><td class="h-num">${item.id}</td></tr>
                <tr><td class="h-ques">${item.q}</td></tr>
                <tr><td class="h-num">${item.id}</td></tr>
                <tr><td class="h-ans">${item.a}</td></tr>
            `;
            container.appendChild(table);
        });
        
        canvas.appendChild(container);
        return canvas;
    }

    function changePage(step) {
        currentPage += step;
        render();
    }

    function toggleViewMode() {
        isFixedMode = !isFixedMode;
        render();
    }

    // 初回実行
    render();
</script>
</body>
</html>
