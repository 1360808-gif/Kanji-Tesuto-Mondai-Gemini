<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <style>
        :root {
            --ink-black: #000000;
            --main-font: "UD Digital Kyokasho N-R", "UD デジタル 教科書体 N-R", sans-serif;
        }

        body { margin: 0; padding: 0; background-color: #e0d8c3; font-family: var(--main-font); }

        /* プリント表示画面 */
        #list-view-screen {
            display: block; /* テスト用に表示状態 */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 200; overflow-x: auto; padding: 40px;
            writing-mode: vertical-rl; /* 縦書き：右から左へ */
        }

        .print-container { display: flex; height: 95vh; align-items: flex-start; }

        /* 15列 × 5行 のメインテーブル */
        .kanji-table {
            border-collapse: collapse;
            border: 2px solid var(--ink-black);
            background: white;
            height: 850px; /* プリントの縦の長さを固定 */
        }

        .kanji-table td {
            border: 1px solid var(--ink-black);
            width: 60px; /* 1列の幅 */
            text-align: center;
            vertical-align: middle;
            padding: 8px 4px;
        }

        /* 行ごとの高さ設定 */
        .row-check  { height: 60px; }  /* 1行目：□ */
        .row-num    { height: 40px; font-weight: bold; background: #f8f8f8; } /* 2・4行目：番号 */
        .row-question { height: 500px; text-align: start; vertical-align: top; font-size: 1.2rem; line-height: 1.8; } /* 3行目：問題 */
        .row-answer { height: 150px; font-weight: bold; color: #e74c3c; font-size: 1.1rem; } /* 5行目：答え */

        /* チェックボックスの見た目 */
        .square {
            width: 30px; height: 30px; border: 2px solid var(--ink-black);
            margin: auto; display: flex; align-items: center; justify-content: center;
            font-size: 20px; color: #27ae60;
        }

        /* タイトル */
        .print-title {
            font-size: 24px; font-weight: bold; margin-left: 20px;
            border-left: 3px double #000; padding: 10px; height: 100%;
            display: flex; align-items: center;
        }

        #close-btn {
            position: fixed; top: 20px; right: 20px; writing-mode: horizontal-tb;
            padding: 10px 20px; background: #ff4757; color: white; border: none;
            border-radius: 8px; font-weight: bold; cursor: pointer;
        }
    </style>
</head>
<body>

<div id="list-view-screen">
    <button id="close-btn" onclick="this.parentElement.style.display='none'">× とじる</button>
    
    <div class="print-container" id="print-area">
        </div>
</div>

<script>
    // サンプルデータ
    const questions = Array.from({length: 15}, (_, i) => ({
        num: i + 1,
        q: `これは${i+1}問目の問題文です。ここに（かんじ）が入ります。`,
        a: `漢字${i+1}`,
        isPerfect: i % 3 === 0 // 3問に1問チェックが入るサンプル
    }));

    function generateTable(data, titleText) {
        const area = document.getElementById('print-area');
        
        // タイトル追加
        const titleDiv = document.createElement('div');
        titleDiv.className = 'print-title';
        titleDiv.innerText = titleText;
        area.appendChild(titleDiv);

        // テーブル作成
        const table = document.createElement('table');
        table.className = 'kanji-table';

        // 5つの行（tr）をあらかじめ作成
        const r1 = document.createElement('tr'); r1.className = 'row-check';
        const r2 = document.createElement('tr'); r2.className = 'row-num';
        const r3 = document.createElement('tr'); r3.className = 'row-question';
        const r4 = document.createElement('tr'); r4.className = 'row-num';
        const r5 = document.createElement('tr'); r5.className = 'row-answer';

        // 15列（td）分ループして各行にセルを追加
        data.forEach(item => {
            r1.innerHTML += `<td><div class="square">${item.isPerfect ? '✔' : ''}</div></td>`;
            r2.innerHTML += `<td>${item.num}</td>`;
            r3.innerHTML += `<td>${item.q.replace(/[（\(].*?[）\)]/g, '（　　）')}</td>`;
            r4.innerHTML += `<td>${item.num}</td>`;
            r5.innerHTML += `<td>${item.a}</td>`;
        });

        // テーブルに行を合体
        table.appendChild(r1);
        table.appendChild(r2);
        table.appendChild(r3);
        table.appendChild(r4);
        table.appendChild(r5);
        
        area.appendChild(table);
    }

    // 実行
    generateTable(questions, "６年　やまなし");
</script>
</body>
</html>
