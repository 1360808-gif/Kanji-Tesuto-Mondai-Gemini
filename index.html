<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>漢字プリントシステム - 一覧表示</title>
    <style>
        :root {
            --ink-black: #000000;
            --main-font: "UD Digital Kyokasho N-R", "UD デジタル 教科書体 N-R", sans-serif;
        }

        /* --- 共通レイアウト --- */
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
            font-family: var(--main-font);
        }

        .print-canvas {
            display: flex;
            flex-direction: row-reverse;
            background: white;
            border: 1px solid #999;
            box-sizing: border-box;
        }

        .print-title {
            writing-mode: vertical-rl;
            font-weight: bold;
            border-left: 3px double #000;
            display: flex;
            align-items: center;
            justify-content: center;
            border-top: 1px solid #000;
            border-right: 1px solid #000;
            border-bottom: 1px solid #000;
        }

        .kanji-table-container {
            display: flex;
            flex-direction: row-reverse;
        }

        .column-unit { border-collapse: collapse; height: 100%; }
        .column-unit td {
            border: 1px solid var(--ink-black);
            text-align: center;
            vertical-align: middle;
            background: white;
            padding: 0;
        }

        /* --- モード1：レスポンシブ（画面閲覧用） --- */
        .mode-responsive {
            height: 90vh;
            padding: 2vh;
        }
        .mode-responsive .column-unit td { width: 5.5vw; max-width: 65px; }
        .mode-responsive .print-title { font-size: min(2.5vh, 24px); padding: 0 1vh; margin-left: 1.5vh; }
        .mode-responsive .h-check { height: 8%; }
        .mode-responsive .h-num   { height: 5%; font-size: 1.5vh; background: #f9f9f9; }
        .mode-responsive .h-ques  { height: 62%; writing-mode: vertical-rl; text-orientation: upright; font-size: min(2vh, 18px); padding: 1vh 2px; text-align: start; }
        .mode-responsive .h-ans   { height: 20%; font-size: min(2.2vh, 20px); color: #e74c3c; writing-mode: vertical-rl; text-orientation: upright; }

        /* --- モード2：サイズ固定（印刷・保存用） --- */
        .mode-fixed {
            height: 800px; /* A4横を想定した固定高 */
            padding: 30px;
        }
        .mode-fixed .column-unit td { width: 65px; }
        .mode-fixed .print-title { font-size: 24px; padding: 0 10px; margin-left: 20px; }
        .mode-fixed .h-check { height: 60px; }
        .h-num { font-weight: bold; background: #f9f9f9; }
        .mode-fixed .h-num   { height: 40px; font-size: 16px; }
        .mode-fixed .h-ques  { height: 480px; writing-mode: vertical-rl; text-orientation: upright; font-size: 20px; padding: 20px 5px; text-align: start; }
        .mode-fixed .h-ans   { height: 180px; font-size: 22px; color: #e74c3c; writing-mode: vertical-rl; text-orientation: upright; }

        .square { width: 25px; height: 25px; border: 1px solid #000; margin: auto; }
        #close-btn { position: fixed; top: 10px; left: 10px; padding: 8px 16px; background: #ff4757; color: white; border: none; border-radius: 20px; cursor: pointer; z-index: 100; }
    </style>
</head>
<body>

    <button id="close-btn" onclick="toggleMode()">モード切替 (閲覧/印刷)</button>

    <div id="main-canvas" class="print-canvas mode-responsive">
        <div class="print-title">６年　やまなし</div>
        <div id="table-area" class="kanji-table-container"></div>
    </div>

<script>
    const area = document.getElementById('table-area');
    const canvas = document.getElementById('main-canvas');

    // モード切替関数
    function toggleMode() {
        if (canvas.classList.contains('mode-responsive')) {
            canvas.classList.replace('mode-responsive', 'mode-fixed');
            alert("印刷用サイズ（固定）に切り替えました。");
        } else {
            canvas.classList.replace('mode-fixed', 'mode-responsive');
            alert("閲覧用サイズ（レスポンシブ）に切り替えました。");
        }
    }

    // 15列生成処理
    for (let i = 1; i <= 15; i++) {
        const table = document.createElement('table');
        table.className = 'column-unit';
        table.innerHTML = `
            <tr><td class="h-check"><div class="square"></div></td></tr>
            <tr><td class="h-num">${i}</td></tr>
            <tr><td class="h-ques">ここに漢字の問題文が表示されます。縦書きで読みやすさを重視。（　）</td></tr>
            <tr><td class="h-num">${i}</td></tr>
            <tr><td class="h-ans">正解例</td></tr>
        `;
        area.appendChild(table);
    }
</script>
</body>
</html>
